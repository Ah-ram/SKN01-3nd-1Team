<div align="center">
  <img src="https://capsule-render.vercel.app/api?type=waving&color=0:FF0000,100:FFA500&height=240&text=SKN01-3rd-1Team&animation=&fontColor=ffffff&fontSize=90" width="1000" />

  <img width="1000" alt="image" src="https://github.com/Jh-jaehyuk/Jh-jaehyuk.github.io/assets/126551524/7ea63fc3-95f0-44d5-a0f0-cf431cae34f1"> 
  
  [![Hits](https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https://github.com/SKNETWORKS-FAMILY-AICAMP/SKN01-3nd-1Team&count_bg=%2379C83D&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=hits&edge_flat=false)](https://hits.seeyoufarm.com)
</div>



# 1. Introduction Team (팀 소개)
### ✅ 팀명 : TCP(Text Chat Programmers)
<table align=center>
  <tbody>
    <tr>
      <td align=center><b>한재혁</b></td>
      <td align=center><b>민경원</b></td>
      <td align=center><b>정아람</b></td>
      <td align=center><b>최인헌</b></td>
      <td align=center><b>이용휘</b></td>
    </tr>
    <tr>
      <td align="center">
        <div>
          <img src="https://github.com/user-attachments/assets/80f0a998-61ab-4de5-a652-51575e8a4468"width="200px; alt=""/>
        </div>
      </td>
      <td align="center">
        <div>
          <img src="https://github.com/user-attachments/assets/30f29d8b-bcec-46c7-bce6-e6e4ec414e55"width="200px;" alt=""/>
        </div>
      </td>
      <td align="center">
        <img src="https://github.com/user-attachments/assets/c01c579b-7f4f-436b-984a-74a26d2cef44"width="200px;" alt=""/>
      </td>
      <td align="center">
        <img src="https://github.com/user-attachments/assets/77eff59b-1c54-4d91-a49c-5f81cf28fb35"width="200px;" alt=""/>
      </td>
      <td align="center">
        <img src="https://github.com/user-attachments/assets/49822355-b1ef-485b-a45b-dc2199d8397b"width="200px;" alt=""/>
      </td>
    </tr>
    <tr>
      <td><a href="https://github.com/Jh-jaehyuk"><div align=center>@Jh-jaehyuk</div></a></td>
      <td><a href="https://github.com/MinMessi"><div align=center>@MinMessi</div></a></td>
      <td><a href="https://github.com/Ah-ram"><div align=center>@Ah-ram</div></a></td>
      <td><a href="https://github.com/ih9511"><div align=center>@ih9511</div></a></td>
      <td><a href="https://github.com/y0ng98"><div align=center>@y0ng98</div></a></td>
    </tr>
  </tbody>
</table>
<br><br><br>


# 2. Introduction Project (프로젝트 개요)

### ✅프로젝트 명
Web Application CI-CD 구축하기

### ✅프로젝트 소개
Web Appication(Front-End + Back-End + Fast API) + CI-CD(Docker + GitHub Actions + AWS)

### ✅프로젝트 필요성(배경)
Web Application의 CI-CD 구축의 필요성은 아래와 같습니다.

## CI/CD의 필요성

### CI (Continuous Integration)
- **자동화된 테스트와 빌드**: 코드를 통합할 때마다 자동으로 테스트와 빌드를 실행하여 오류를 조기에 발견하고 수정할 수 있습니다.
- **통합 주기 단축**: 작은 변경 사항을 자주 통합함으로써 복잡한 통합 과정을 피하고 개발 속도를 높일 수 있습니다.
- **품질 향상**: 지속적인 코드 리뷰와 테스트를 통해 코드의 품질을 유지하고 개선할 수 있습니다.

### CD (Continuous Deployment/Continuous Delivery)
- **자동 배포**: 코드가 통합되고 테스트를 통과하면 자동으로 배포되어 새로운 기능이나 수정 사항을 빠르게 사용자에게 제공할 수 있습니다.
- **빠른 피드백**: 실제 사용자에게 배포됨으로써 피드백을 신속하게 받아 문제를 조기에 해결하고 개선할 수 있습니다.
- **안정성 향상**: 배포 자동화를 통해 사람의 실수를 줄이고 일관된 배포 과정을 유지할 수 있습니다.

### 종합적인 필요성
- **효율성 증대**: 개발, 테스트, 배포 과정의 자동화로 개발 팀의 효율성을 높일 수 있습니다.
- **위험 감소**: 자주 작은 단위로 배포함으로써 큰 배포보다 위험을 줄일 수 있습니다.
- **빠른 시장 출시**: 새로운 기능을 빠르게 출시하여 시장의 요구에 신속히 대응할 수 있습니다.
- **협업 향상**: 개발자 간의 협업을 원활하게 하고 코드 품질을 유지할 수 있습니다.

CI/CD는 궁극적으로 개발 속도를 높이고, 코드 품질을 유지하며, 사용자에게 신속하게 가치를 제공하는 데 중요한 역할을 합니다.


### ✅프로젝트 목표
1. Front-End에서는 **TypeScript**와 **Vue.js + Vuetify3**를 이용하여 사용자 측면에서 유리한 UI-UX를 구축하였고, **Axios** 를 통해서 올바른 Request를 하는 것을 목표로 삼았습니다. 
2. Back-End에서는 **Python**과 **Django**, **MySQL** 등을 이용하여 Request에 대한 정확한 Response와 원활한 웹사이트 운영하는 것을 목표로 삼았습니다.
3. Fast API에서는 **Machine Learning** **Deep Learning** 이용하여 데이터를 분석 및 예측할 수 있도록 하였습니다.
4. CI-CD는 지속적인 코드 통합과 지속적인 배포를 통해 궁극적으로 개발 속도를 높이고, 코드 품질을 유지하며, 개발과 운영의 경계를 허물며 신속하게 가치를 제공하는 것을 목표로 삼았습니다. 
<br><br><br>


# 3. ERD 구성
![image](https://github.com/user-attachments/assets/89c648be-12d6-4a15-8fbb-6d0149eaee81)
<br><br><br>

## 애자일 보드를 사용하는 이유
```c
과거 정의서들을 일일히 작성하였지만 빠른 속도로 무언가를 개발하는데 한계가 있습니다.
처음부터 많은 것들을 빌드업하면서 빠른 생산성을 기반으로 움직이려면 반드시 애자일해야합니다.
고로 폭포수 설계 방식이 아닌 애자일 프로세스 방식으로 애자일 보드를 작성하면서 진행했습니다.

애자일 보드는 자체적으로 제목이 요구 사항을 내포하며 각 카드 내부에는 정의한 Domain의 세부 사항이 기록됩니다.
고로 빠르게 팀원들과 협업 할 수 있고 소통 비용을 최소화시킬 수 있습니다.
작은 것 같지만 이와 같은 것들이 쌓여서 아주 기민하고 민첩한 조직을 만들어 냅니다.
```

# 4. Backend 애자일 보드 - 요구 사항 정의서
![image](https://github.com/user-attachments/assets/ecc39db2-4b69-4609-b5d8-54a1a9464e38)
![image](https://github.com/user-attachments/assets/f28987d4-0ea5-4485-ae20-c7823bd6907c)
<br><br><br>


# 5. Frontend 애자일 보드 - 화면 설계서
![image](https://github.com/user-attachments/assets/a4a4841b-52c5-4e46-92e7-d02d0aecf0e0)
![image](https://github.com/user-attachments/assets/ed4222af-786a-47b3-af49-4e4b1b356087)
<br><br><br>


# 6. FastAPI 애자일 보드 - AI 서빙 설계서
![image](https://github.com/user-attachments/assets/f0239817-461a-4625-9176-f70bacece673)
<br><br><br>

# 7. 시스템 구성도
![image](https://github.com/user-attachments/assets/66a78240-b41d-487a-8800-29bccbab7d41)
<br><br><br>


# 8. Manual Deploy (수동 배포 진행 절차)

## Frontend (UI)
## Backend (Server)
## FastAPI (AI Core Server)
<br><br><br>



# 9. Autonomous Deploy (자동 배포 진행 절차)

## Frontend (UI)

## Backend (Server)
### Django CI
#### Basic Settings
GitHub Actions를 활용해서 CI를 구성합니다. 브랜치의 경우, develop 브랜치가 아닌, main 브랜치에서 작업을 수행합니다.  
  
![image](https://github.com/user-attachments/assets/a537bdde-8ec9-46d7-b37b-7c881087349d)  
파일 이름의 경우 ci 로 설정하고, 파일의 경우 yaml 형식으로 구성합니다. XML, JSON 등의 형식으로 구성해도 무방하나, 유지 보수의 유연성과 개발 편의성으로 위해 yaml을 선택하였습니다. 저희 프로젝트에서 Backend의 경우, Django를 기반으로 하여 MySQL과 Redis를 활용합니다. 이에 맞게 yaml 파일을 구성합니다.  

#### Django 일괄 테스트 진행
또한, 매번 integration 이전에 테스트를 하는 과정에서 모든 테스트 파일을 수동으로 돌리는 번거로움을 줄이기 위해서 Django 테스트 패키지를 찾아서 CI에 전달하게끔 구성하였습니다.  

![image](https://github.com/user-attachments/assets/9afb8a59-eaf9-47dc-ba52-de95da84b681)
  
해당 위치에 find_test.sh 를 생성하고 다음의 코드를 작성합니다.  
```bash
#!/usr/bin/env bash

TEST_DIRS=$(find . -path ./.venv -prune -o -type d -name 'tests' -print)

APP_TESTS=()

for TEST_DIR in $TEST_DIRS; do
  APP_NAME=$(basename $(dirname $TEST_DIR))
  TEST_FILES=$(find $TEST_DIR -type f -name 'test*.py')

  if [ -z "$TEST_FILES" ]; then
    continue
  fi

  APP_TESTS+=("${APP_NAME}.tests")
done

echo "${APP_TESTS[@]}"
```
다음으로 실행 권한을 부여합니다. 모든 명령어는 기본적으로 Git Bash에서 실행하기 때문에 Linux 명령어를 사용합니다. 이후, 파일을 실행시켜 루트 위치 내의 모든 tests 파일들을 잘 가져오는지 확인합니다.
```bash
chmod +x find_test.sh
./find_test.sh
```
### Django CD
#### Basic Settings
CI 구성때와 마찬가지로 GitHub Actions를 이용하여 CD를 구성합니다. 
![image](https://github.com/user-attachments/assets/89bdb835-5276-419b-b902-ccf3c6023449)

Django 환경을 여러 개 구성해야 할 경우, build 시에 서로 구분이 돼야합니다. 그렇기 때문에, jobs: build: steps: `Build and push Docker image` 쪽을 다음과 같이 구성합니다.  
```bash
- name: Build and push Docker image
  run: |
    cd <프로젝트 이름>
    docker buildx build --platform linux/arm64 -f Dockerfile -t ghcr.io/${{ github.actor }}/<빌드하고자 하는 환경 이름>:latest --push .
```
#### Github Actions Runner 구성
GitHub Actions Runner 설정을 위해 Settings로 이동합니다. Settings -> Code and automation -> Actions -> Runners 이동 후 우측 상단에 `New self-hosted runner` 버튼을 클릭합니다.

![image](https://github.com/user-attachments/assets/2bc9e67a-32c8-4985-9006-cfd4ee157bbd)
우리는 AWS에서 `Linux`를 선택했기 때문에 `Runner image`를 `Linux`로 선택합니다. 전체적인 세팅은 다음과 같습니다.  
- Runner Image: `Linux`
- Architecturre: `ARM64`  
  
이후 `Git Bash`를 통해 AWS에 접속합니다.
  
![image](https://github.com/user-attachments/assets/fec99c35-004b-4d83-8d27-f9d8e0f49630)
  
이후 `Django` 프로젝트 폴더로 이동한 다음, 생성된 `runners` 폴더로 들어갑니다. 다음의 명령을 실행하여 `backend-action-runner` 폴더를 생성합니다.
```bash
mkdir backend-action-runner
cd backend-action-runner
```
이후 아래쪽에 있는 명령어들을 입력합니다. 입력 시 CD 스크립트의 `deploy` 부분의 구성을 토대로 수정합니다.
```bash
deploy:
  needs: build
  name: Deploy
  runs-on: [ self-hosted, <runners 실행할 이름 > ]
  steps:
  - name: Login to GHCR
  ...
```
`config` 버튼을 누르면 아래와 같은 화면이 나옵니다.

![image](https://github.com/user-attachments/assets/13393ca6-4878-451f-afbd-5d3278ae2d5f)

정상적으로 구동된다면 쉘 스크립트 파일을 실행합시다.
```bash
./run.sh
```
이후 background 에서도 실행되도록 설정합니다.
```bash
nohup ./run.sh > run.log 2>&1 &
```
추가적으로 background에서 잘 작동하는지 확인하려면 다음의 명령을 입력합니다.
```bash
ps -ef | grep run.sh
```
잘 작동한다면, 다음과 같이 표시됩니다.
  
![image](https://github.com/user-attachments/assets/dcb9f5f7-6ea0-4d37-b0c5-a35abccccc1b)

### docker-compose 구성
`Git Bash`를 통해 AWS에 접속합니다. 이후 아래와 같이 명령어를 입력합니다.
```bash
cd <프로젝트명>
mkdir django-backend
cd django-backend
```
Django 프로젝트 디렉토리 하위에 .env 파일과 함께 docker-compose.yml 파일을 생성하고 다음의 내용을 기입합니다.
```bash
version: '3'
services:
  django:
    container_name: django
    image: ghcr.io/${GITHUB_ACTOR}/tf-django-server:latest
    command: /app/wait-for-it.sh db:3306 -t 15 -- sh -c "python manage.py migrate && python manage.py runserver 0.0.0.0:8000"
    restart: always
    ports:
      - "8000:8000"
    depends_on:
      - db
      - redis
    environment:
      - DJANGO_SETTINGS_MODULE=config.settings
      - CORS_ALLOWED_ORIGINS=${CORS_ALLOWED_ORIGINS}
      - CSRF_TRUSTED_ORIGINS=${CSRF_TRUSTED_ORIGINS}
      - DATABASE_HOST=${DATABASE_HOST}
      - DATABASE_PORT=3306
      - DATABASE_NAME=${DATABASE_NAME}
      - DATABASE_USER=${DATABASE_USER}
      - DATABASE_PASSWORD=${DATABASE_PASSWORD}
      - KAKAO_LOGIN_URL=${KAKAO_LOGIN_URL}
      - KAKAO_CLIENT_ID=${KAKAO_CLIENT_ID}
      - KAKAO_REDIRECT_URI=${KAKAO_REDIRECT_URI}
      - KAKAO_TOKEN_REQUEST_URI=${KAKAO_TOKEN_REQUEST_URI}
      - KAKAO_USERINFO_REQUEST_URI=${KAKAO_USERINFO_REQUEST_URI}
      - REDIS_HOST=redis
      - REDIS_PORT=6379
      - REDIS_PASSWORD=${REDIS_PASSWORD}
      - ALLOWED_HOSTS=${ALLOWED_HOSTS}
    networks:
      - app-network

  db:
    image: mysql:8.0
    container_name: db
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: ${DATABASE_PASSWORD}
      MYSQL_DATABASE: ${DATABASE_NAME}
      MYSQL_USER: ${DATABASE_USER}
      MYSQL_PASSWORD: ${DATABASE_PASSWORD}
    ports:
      - "3306:3306"
    volumes:
      - db_data:/var/lib/mysql
      - ./mysql/custom.cnf:/etc/mysql/conf.d/custom.cnf
      - ./mysql/logs:/var/log/mysql
      - ./init.sql:/docker-entrypoint-initdb.d/init.sql
    networks:
      - app-network

  redis:
    image: redis:latest
    container_name: redis-container
    restart: always
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command: ["redis-server", "--requirepass", "${REDIS_PASSWORD}"]
    networks:
      - app-network

volumes:
  db_data:
  redis_data:
  app:

networks:
  app-network:
    driver: bridge
```
이후 django-backend 하위에 `mysql`디렉토리를 만들고 `custom.cnf` 파일을 생성합니다.
```bash
mkdir mysql
cd mysql
vi custom.cnf
```
```bash
[mysqld]
character-set-server = utf8mb4
collation-server = utf8mb4_general_ci
skip-character-set-client-handshake
innodb_buffer_pool_size = 16M
```
이후 `mysql` 디렉토리 하위에 `logs` 디렉토리를 배치합니다.
```bash
mkdir logs
cd logs
touch README.md
```
그리고 django-backend 디렉토리 하위에 init.sql 파일을 아래와 같이 작성합니다.
```bash
CREATE DATABASE IF NOT EXISTS <db 이름>;
GRANT ALL PRIVILEGES ON <db 이름>.* TO 'eddi'@'%';
FLUSH PRIVILEGES;
```
`Git Bash`에서 `docker-compose up`명령어를 통해 동작하는지 확인합니다. 잘 동작한다면, docker-compose 구성이 잘 마무리 되었습니다.

## FastAPI (AI Core Server)

<br><br><br>



# 10. Result (수행 결과)



<br><br><br>

# 11. Tech Stack (기술 스택)

### Co-Work(Communication)
![Github](https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=GitHub&logoColor=white)
<img src="https://img.shields.io/badge/gitkraken-179287?style=for-the-badge&logo=gitkraken&logoColor=white"/>
<img src="https://img.shields.io/badge/notion-%23000000?style=for-the-badge&logo=notion&logoColor=white"/> 
<img src="https://img.shields.io/badge/slack-%234A154B?style=for-the-badge&logo=slack&logoColor=white"/>
<img src="https://img.shields.io/badge/discord-5865F2?style=for-the-badge&logo=discord&logoColor=white"/>

### IDE
![PyCharm](https://img.shields.io/badge/pycharm-%23000000?style=for-the-badge&logo=pycharm&logoColor=white")
<img src="https://img.shields.io/badge/Jupyter_Notebook-F37626?style=for-the-badge&logo=jupyter&logoColor=white"/>
<img src="https://img.shields.io/badge/VS%20Code-007ACC?style=for-the-badge&logo=visual-studio-code&logoColor=white"/> 


### Frontend
![HTML](https://img.shields.io/badge/HTML-E34F26?style=for-the-badge&logo=html5&logoColor=white)
<img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white"/>
<img src="https://img.shields.io/badge/Javascript-ffb13b?style=for-the-badge&logo=javascript&logoColor=white"/>
<img src="https://img.shields.io/badge/vue.js-4FC08D?style=for-the-badge&logo=vue.js&logoColor=white"/> 
<img src="https://img.shields.io/badge/vuetify-%231867C0?style=for-the-badge&logo=vuetify&logoColor=white"/>
<img src="https://img.shields.io/badge/typescript-3178C6?style=for-the-badge&logo=typescript&logoColor=black"/>
<img src="https://img.shields.io/badge/axios-%235A29E4?style=for-the-badge&logo=axios&logoColor=white"/>

### Backend
![Streamlit](https://img.shields.io/badge/django-092E20?style=for-the-badge&logo=django&logoColor=white)
<img src="https://img.shields.io/badge/python-3776AB?style=for-the-badge&logo=python&logoColor=white"/> 
<img src="https://img.shields.io/badge/pandas-%23150458?style=for-the-badge&logo=pandas&logoColor=white"/> 
<img src="https://img.shields.io/badge/numpy-%23013243?style=for-the-badge&logo=numpy&logoColor=white"/>
<img src="https://img.shields.io/badge/Openpyxl-217346?style=for-the-badge&logo=microsoft-excel&logoColor=white"/>
<img src="https://img.shields.io/badge/SQLAlchemy-666699?style=for-the-badge&logo=sqlalchemy&logoColor=white"/>

### Fast API (AI Core)
![FastAPI](https://img.shields.io/badge/fastapi-%23009688?style=for-the-badge&logo=fastapi&logoColor=white)
<img src="https://img.shields.io/badge/Machine_Learning-FF6F00?style=for-the-badge&logo=machine-learning&logoColor=white"/>
<img src="https://img.shields.io/badge/scikitlearn-%23F7931E?style=for-the-badge&logo=scikitlearn&logoColor=white"/>
<img src="https://img.shields.io/badge/Deep_Learning-00599C?style=for-the-badge&logo=deep-learning&logoColor=white"/>
<img src="https://img.shields.io/badge/TensorFlow-FF6F00?style=for-the-badge&logo=tensorflow&logoColor=white"/>
<img src="https://img.shields.io/badge/Keras-D00000?style=for-the-badge&logo=keras&logoColor=white"/>
<img src="https://img.shields.io/badge/PyTorch-EE4C2C?style=for-the-badge&logo=pytorch&logoColor=white"/>

### CI-CD Infrastructure
![AWS](https://img.shields.io/badge/AWS-232F3E?style=for-the-badge&logo=amazonwebservices&logoColor=white)
<img src="https://img.shields.io/badge/AWS_EC2-FF9900?style=for-the-badge&logo=amazon-ec2&logoColor=white"/>
<img src="https://img.shields.io/badge/AWS_S3-569A31?style=for-the-badge&logo=amazon-s3&logoColor=white"/>
<img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=GitHub&logoColor=white"/>
<img src="https://img.shields.io/badge/github%20actions-2088FF?style=for-the-badge&logo=github-actions&logoColor=white"/>
<img src="https://img.shields.io/badge/docker-%232496ED?style=for-the-badge&logo=docker&logoColor=white"/> 
<img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white"/>
<img src="https://img.shields.io/badge/redis-%23FF4438?style=for-the-badge&logo=redis&logoColor=white"/>
<br><br><br>

# 12. 테스트 보고서 (CI 테스트 결과)
<br><br><br>



# 13. Deploy Issue (배포 이슈)
<br><br><br>



# 14. 한 줄 회고
